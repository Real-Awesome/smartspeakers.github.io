if (self.CavalryLogger) { CavalryLogger.start_js(["UnND7"]); }

__d("BrowsePhotoActions",["csx","cx","Arbiter","AsyncRequest","CSS","DOMQuery","Event","Parent","SelectorDeprecated","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,b){this.element=a,this.target=b,this.init()}Object.assign(a.prototype,{init:function(){if(this.element){b("Event").listen(this.element,"click",this.handleClick.bind(this));var a=b("DOMQuery").scry(this.element,".uiSelector")[0];a&&this.initDeprecatedSelector(a)}b("Arbiter").subscribe(["UFI/CommentAddedActive","UFI/CommentDeletedActive","UFI/LikeActive"],this.handleUFIActions.bind(this))},initDeprecatedSelector:function(a){b("SelectorDeprecated").listen(a,["open","close"],function(c){var d=b("CSS").toggleClass.bind(null,b("Parent").bySelector(a,"._4313"),"_424_",c==="open");c==="open"?d():b("requestAnimationFrame")(d)})},handleClick:function(a){var c=a.getTarget();if(b("Parent").bySelector(c,"._ai7"))return this.handleLike(a)},handleLike:function(a,c){b("CSS").toggleClass(this.element,"_ai5");a=b("DOMQuery").scry(this.element,"_53z").length>0;new(b("AsyncRequest"))().setURI("/ajax/browse/photo_actions.php").setData({fbid:this.element.getAttribute("data-fbid"),action:"like",noupdate:!a}).setRelativeTo(this.element).setErrorHandler(function(){b("CSS").toggleClass(this.element,"_ai5")}.bind(this)).send()},handleUFIActions:function(a,c){if(parseInt(this.element.getAttribute("data-fbid"),10)!==c)return;a==="UFI/LikeActive"&&b("CSS").toggleClass(this.element,"_ai5");new(b("AsyncRequest"))().setURI("/ajax/browse/photo_actions.php").setData({fbid:this.element.getAttribute("data-fbid"),action:"comment"}).setRelativeTo(this.element).send()}});e.exports=a}),null);
__d("BrowseSlidePhoto",["ArbiterMixin","BrowseMouse","Style","Vector"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c,d){this._root=a,this._bio=b,this._contents=c,this._hovercardOn=!1,this.target=d&&d.target,this.initEvents(),this.expand()}Object.assign(a.prototype,b("ArbiterMixin"),{initEvents:function(){b("BrowseMouse").onMouseOver(this._root,this.mouseenter.bind(this)),this.target&&(this.target.subscribe("showhovercard",this.showhovercard.bind(this)),this.target.subscribe("hidehovercard",this.hidehovercard.bind(this)))},expand:function(){var a=b("Vector").getElementDimensions(this._contents).y;a>0&&(b("Style").set(this._bio,"height",a-1+"px"),b("Style").set(this._contents,"opacity",1))},collapse:function(){b("Style").set(this._bio,"height",0),b("Style").set(this._contents,"opacity",0)},mouseenter:function(){this._hovercardOn||clearTimeout(this._hovercardTimeout)},showhovercard:function(){this._hovercardOn=!0,b("Style").set(this._contents,"opacity",1)},hidehovercard:function(){this._hovercardOn=!1}});e.exports=a}),null);